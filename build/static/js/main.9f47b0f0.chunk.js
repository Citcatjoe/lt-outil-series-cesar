(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,a){e.exports=a.p+"static/media/cross.52eba50b.svg"},27:function(e,t,a){e.exports=a.p+"static/media/filter.7a0aa683.svg"},28:function(e,t,a){e.exports=a.p+"static/media/manifier.fb52c751.svg"},29:function(e,t,a){e.exports=a.p+"static/media/angle.8169ec21.svg"},30:function(e,t,a){e.exports=a.p+"static/media/aside-footer-bg.e1ffebce.svg"},31:function(e,t,a){e.exports=a.p+"static/media/aside-bg-1.9cebe77f.png"},32:function(e,t,a){e.exports=a.p+"static/media/no-results.0033cc21.svg"},35:function(e,t,a){e.exports=a(89)},40:function(e,t,a){},64:function(e,t,a){},66:function(e,t,a){},68:function(e,t,a){},70:function(e,t,a){},72:function(e,t,a){},74:function(e,t,a){},76:function(e,t,a){},78:function(e,t,a){},80:function(e,t,a){},82:function(e,t,a){},84:function(e,t,a){},89:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),i=a(10),l=a.n(i),r=(a(40),a(3)),c=a(4),o=a(7),u=a(5),d=a(6),m=a(2),p=a(11),b=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.frameVisible,t=this.props.children;return n.a.createElement("div",{className:"frame ".concat(e?"is-visible":"")},t)}}]),t}(s.Component),h=a(12),f=a.n(h),v=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){if(!this.props.item)return!1;var e={background:"url("+this.props.item.np8_main_media+")"};return n.a.createElement("div",{className:"content"},n.a.createElement("div",{className:"content-background",style:e}),n.a.createElement("div",{className:"content-gradient"}),n.a.createElement("div",{className:"content-details"},n.a.createElement("div",{className:"content-details-header"},n.a.createElement("button",{className:"content-close",onClick:this.props.articleClose},"Fermer")),n.a.createElement("div",{className:"content-details-body"},n.a.createElement("div",{className:"content-details-body-col1"},n.a.createElement("img",{src:this.props.item.np8_main_media,alt:""})),n.a.createElement("div",{className:"content-details-body-col2"},n.a.createElement("h1",{className:"body-h1"},this.props.item.title),n.a.createElement("span",{className:"body-highlighted"},this.props.item.lt_tv_show_genre),n.a.createElement("div",{className:"body-p"},f()(this.props.item.body)),n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement("span",null,"Ann\xe9es prod. :"),this.props.item.np8_start_date," -"," ",this.props.item.np8_end_date?this.props.item.np8_end_date:"aujourd\u2019hui"),n.a.createElement("li",null,n.a.createElement("span",null,"R\xe9alis\xe9 par :"),this.props.item.np8_gallery_author),n.a.createElement("li",null,n.a.createElement("span",null,"Format :"),"\xc9pisodes de"," ",this.props.item.lt_reading_time," minutes"),n.a.createElement("li",null,n.a.createElement("span",null,"Distributeur :"),this.props.item.lt_distributor),n.a.createElement("li",null,n.a.createElement("span",null,"Provenance :"),this.props.item.lt_country),n.a.createElement("li",{className:"article-link"},this.props.item.np8_news_ref?f()("<span>Lire aussi :</span>"+this.props.item.np8_news_ref):"")),n.a.createElement("div",{className:"links"})))))}}]),t}(s.Component),g=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.loading;return n.a.createElement("div",{className:"loading ".concat(e?"is-visible":"")},n.a.createElement("div",{className:"loader"},"Loading..."))}}]),t}(s.Component),O=a(13),E=a.n(O),N=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.introVisible,t=this.props.introInnerVisible,a=this.props.item.title,s=this.props.item.body,i=this.props.item.np8_main_media;return this.props.item.lt_tv_show_tag?n.a.createElement("div",{className:"intro ".concat(e?"is-visible":"")},n.a.createElement("div",{className:"intro-inner ".concat(t?"is-visible":"")},n.a.createElement("h1",null,a),f()(s),n.a.createElement("button",{className:"content-close is-selected",onClick:this.props.introClose},"Fermer"))):n.a.createElement("div",{className:"item-teaser",onClick:this.props.articleOpen.bind(this,this.props.item)},n.a.createElement("div",{className:"item-teaser--overlay"},n.a.createElement("img",{className:"item-teaser--overlay-icon",src:E.a,alt:""})),n.a.createElement("figure",{className:"item-teaser--figure",style:{backgroundImage:"url("+i+")"}}),n.a.createElement("h2",{className:"item-teaser--title"},a))}}]),t}(n.a.Component),j=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.button.label;return n.a.createElement("button",{onClick:this.props.buttonHandle.bind(this,this.props.index),className:this.props.button.status?"is-selected":""},e)}}]),t}(s.Component),_=a(34),y=function(e){function t(){var e,a;Object(r.a)(this,t);for(var s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={selectedOption:null,selectJsonLabel:a.props.select.selectJsonLabel},a.handleChange=function(e){a.setState({selectedOption:e}),a.props.selectHandle(e,a.state.selectJsonLabel)},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state.selectedOption,t=this.props.select.selectName,a=this.props.select.selectOptions;return n.a.createElement("div",{className:"filter-select"},n.a.createElement(_.a,{className:"select",classNamePrefix:"select",options:a,value:e,onChange:this.handleChange,isClearable:!0,placeholder:t}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.selectedOption&&e.filteredOptions[t.selectJsonLabel]!==t.selectedOption.value?{selectedOption:null}:{}}}]),t}(s.Component),k=a(27),C=a.n(k),V=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"aside-toggle",onClick:this.props.asideToggle},n.a.createElement("img",{className:"aside-toggle--icon",src:C.a,alt:""}),n.a.createElement("span",{className:"aside-toggle--text"},"Filtrer"))}}]),t}(s.Component),S=a(28),F=a.n(S),H=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"filter-search"},n.a.createElement("input",{className:"filter-search--textfield",type:"text",placeholder:"Recherche",id:"filter-search--textfield",onChange:this.props.onChange,value:this.props.searchTerm}),n.a.createElement("img",{className:"filter-search--icon",src:F.a,alt:""}))}}]),t}(s.Component),w=a(29),L=a.n(w),T=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={isOpen:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleToggle",value:function(e){e.preventDefault(),this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){var e=this,t=this.state.isOpen;return n.a.createElement("div",{className:"filter-order ".concat(t?"is-open":"is-closed"),onClick:function(t){return e.handleToggle(t)}},n.a.createElement("span",{className:"filter-order--text"},this.props.orderLabel?this.props.orderLabel:"Ordre"),n.a.createElement("img",{className:"filter-order--icon",src:L.a,alt:""}),n.a.createElement("ul",{className:"filter-order--items"},n.a.createElement("li",{className:"filter-order--items--item",onClick:this.props.orderHandle.bind(this,"title","asc","Nom asc.")},"Par nom"),n.a.createElement("li",{className:"filter-order--items--item",onClick:this.props.orderHandle.bind(this,"title","des","Nom desc.")},"Par nom inv."),n.a.createElement("li",{className:"filter-order--items--item",onClick:this.props.orderHandle.bind(this,"np8_start_date","asc","Ann\xe9e asc.")},"Par ann\xe9e"),n.a.createElement("li",{className:"filter-order--items--item",onClick:this.props.orderHandle.bind(this,"np8_start_date","des","Ann\xe9e desc.")},"Par ann\xe9e inv.")))}}]),t}(s.Component),x=(a(64),a(66),a(68),a(70),a(72),a(74),a(76),a(78),a(80),a(82),a(84),a(30)),P=a.n(x),J=a(31),I=a.n(J),B=a(32),A=a.n(B);a(86);var D=a(88),q={backgroundImage:"url("+I.a+")"},R=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).introClose=a.introClose.bind(Object(m.a)(Object(m.a)(a))),a.articleClose=a.articleClose.bind(Object(m.a)(Object(m.a)(a))),a.articleOpen=a.articleOpen.bind(Object(m.a)(Object(m.a)(a))),a.buttonHandle=a.buttonHandle.bind(Object(m.a)(Object(m.a)(a))),a.asideToggle=a.asideToggle.bind(Object(m.a)(Object(m.a)(a))),a.selectHandle=a.selectHandle.bind(Object(m.a)(Object(m.a)(a))),a.resetFilters=a.resetFilters.bind(Object(m.a)(Object(m.a)(a))),a.searchHandler=a.searchHandler.bind(Object(m.a)(Object(m.a)(a))),a.searchingFor=a.searchingFor.bind(Object(m.a)(Object(m.a)(a))),a.orderHandle=a.orderHandle.bind(Object(m.a)(Object(m.a)(a))),a.state={baseData:[],articles:[],articlesFiltered:null,asideCloseButtonVisible:!1,asideVisible:!1,introVisible:!0,introInnerVisible:!0,headerVisible:!0,gridVisible:!0,frameVisible:!1,loading:!0,selectedOption:!1,filteredOptions:[],searchTerm:"",orderLabel:null,orderValue:null,orderSort:null,buttons:[{status:!1,label:"Se d\xe9lasser en mangeant ou repassant"},{status:!1,label:"Frissonner"},{status:!1,label:"En discuter demain au bureau"},{status:!1,label:"Remonter le temps"},{status:!1,label:"Regarder un truc compl\xe8tement frapp\xe9"}],selects:[{selectName:"Genre",selectJsonLabel:"lt_tv_show_genre",selectOptions:[{value:"Action",label:"Action"},{value:"Com\xe9die",label:"Com\xe9die"},{value:"Historique",label:"Historique"},{value:"Policier",label:"Policier"},{value:"Science-fiction, fantastique",label:"Science-fiction, fantastique"},{value:"Sentimental",label:"Sentimental"},{value:"Soci\xe9t\xe9",label:"Soci\xe9t\xe9"}]},{selectName:"Public",selectJsonLabel:"lt_informed_public",selectOptions:[{value:"Tout le monde dans la famille",label:"Tout le monde dans la famille"},{value:"Public averti",label:"Public averti"}]},{selectName:"Provenance de la s\xe9rie",selectJsonLabel:"lt_country",selectOptions:[{value:"Canada",label:"Canada"},{value:"\xc9tats-Unis",label:"\xc9tats-Unis"},{value:"France",label:"France"},{value:"Grande-Bretagne",label:"Grande-Bretagne"}]},{selectName:"Format des \xe9pisodes",selectJsonLabel:"lt_reading_time",selectOptions:[{value:"<15",label:"Moins de 15 minutes"},{value:"<=30",label:"De 15 \xe0 30 minutes"},{value:">30",label:"Plus de 30 minutes"}]},{selectName:"\xc9tat de la production",selectJsonLabel:"np8_end_date",selectOptions:[{value:!1,label:"En cours"},{value:!0,label:"Termin\xe9e"}]},{selectName:"Histoire suivie",selectJsonLabel:"lt_tv_show_serial",selectOptions:[{value:"Feuilleton",label:"Oui"},{value:"Histoires autonomes",label:"Non"}]}]},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"orderHandle",value:function(e,t,a){var s=null;s=null!==this.state.articlesFiltered?D(this.state.articlesFiltered,e,t):D(this.state.articles,e,t),this.setState({articlesFiltered:s,orderLabel:a,orderValue:e,orderSort:t})}},{key:"searchingFor",value:function(e){return function(t){return t.title.toLowerCase().includes(e.toLowerCase())||!e}}},{key:"searchHandler",value:function(e){this.setState({searchTerm:e.target.value})}},{key:"resetFilters",value:function(){var e=this.state.buttons;e.map(function(e){return e.status=!1,e}),this.setState({filteredOptions:[],articlesFiltered:null,searchTerm:"",orderLabel:null,orderSort:null,orderValue:null,buttons:e,introVisible:!1})}},{key:"introClose",value:function(){var e=this;this.setState({introInnerVisible:!1},function(){setTimeout(function(){e.setState({introVisible:!1})},200)})}},{key:"articleOpen",value:function(e){var t=this;this.setState({headerVisible:!1,gridVisible:!1,item:e},function(){setTimeout(function(){t.setState({frameVisible:!0}),document.body.classList.add("no-scroll")},500)})}},{key:"articleClose",value:function(){var e=this;this.setState({frameVisible:!1},function(){setTimeout(function(){e.setState({headerVisible:!0,gridVisible:!0}),document.body.classList.remove("no-scroll")},500)})}},{key:"selectHandle",value:function(e,t){var a=this.state.articles,s=this.state.filteredOptions;null!==e?s[t]=e.value:s[t]&&delete s[t];var n=function(e){if(s.hasOwnProperty(e))switch(!0){case["lt_tv_show_genre","lt_country"].indexOf(e)>=0:a=a.filter(function(t){return t[e].includes(s[e])});break;case"lt_reading_time"===e:a=a.filter(function(t){return a=t[e],((a=parseInt(a,10))<15?"<15":a<=30?"<=30":">30")===s[e];var a});break;case"np8_end_date"===e:a=a.filter(function(t){return t.completed===s[e]});break;default:a=a.filter(function(t){return t[e]===s[e]})}};for(var i in s)n(i);s.forEach(function(e,t){}),this.setState({selectedOption:e,articlesFiltered:a,filteredOptions:s})}},{key:"buttonHandle",value:function(e){var t=this.state.buttons,a=this.state.articles,s=t.map(function(t,s){return s===e?(!1===t.status&&(a=a.filter(function(e){return e.lt_tv_show_quick_suggestion===t.label})),t.status=!t.status):t.status=!1,t});this.setState({buttons:s});var n=null;null!==this.state.orderLabel?(n=D(a,this.state.orderValue,this.state.orderSort),this.setState({articlesFiltered:n})):this.setState({articlesFiltered:a})}},{key:"asideToggle",value:function(){var e=this;this.state.asideVisible?this.setState({asideCloseButtonVisible:!1},function(){setTimeout(function(){e.setState({asideVisible:!1})},250)}):this.setState({asideVisible:!0},function(){setTimeout(function(){e.setState({asideCloseButtonVisible:!0})},250)})}},{key:"componentDidMount",value:function(){var e=this;fetch("http://web.tcch.ch/tv-test/index_read.php").then(function(e){return e.json()}).then(function(t){t.map(function(e,t){return e.completed=""!==e.np8_end_date}),e.setState({baseData:t,articles:t,loading:!1});var a=[];t.map(function(e,t){var s=e.lt_country.length>0?e.lt_country.split(", "):[];return a=a.concat(s)}),(a=a.filter(function(e,t,a){return a.indexOf(e)===t})).sort(function(e,t){return e.localeCompare(t)});var s=[];a.map(function(e,t){return s.push({value:e,label:e})});var n=e.state.selects;n.forEach(function(e){"lt_country"===e.selectJsonLabel&&(e.selectOptions=s)}),e.setState({selects:n})}).catch(function(){console.log("Error when loading json")})}},{key:"render",value:function(){var e=this,t=this.state,a=t.articles,s=t.articlesFiltered,i=this.state.asideCloseButtonVisible,l=this.state.asideVisible,r=this.state.headerVisible,c=this.state.frameVisible,o=this.state.gridVisible,u=this.state.loading,d=this.state.buttons,m=this.state.selects,h=this.state.introVisible,f=this.state.introInnerVisible;return null!==s&&(a=s),a=a.filter(this.searchingFor(this.state.searchTerm)),n.a.createElement("div",{className:"App"},n.a.createElement("aside",{style:q,className:"".concat(l?"is-visible":"")},n.a.createElement("div",{className:"aside--close-button ".concat(i?"is-visible":""),onClick:this.asideToggle},n.a.createElement("img",{className:"aside--close-button--img",alt:"Fermer",src:E.a})),n.a.createElement(p.d,{defaultIndex:0},n.a.createElement(p.b,null,n.a.createElement(p.a,{onClick:this.resetFilters},"Suggestions"),n.a.createElement(p.a,{onClick:this.resetFilters},"Sur mesure")),n.a.createElement(p.c,null,n.a.createElement("h3",{className:"aside-title"},"Nos suggestions rapides"),d.length>0?d.map(function(t,a){return n.a.createElement(j,{index:a,key:a,button:t,buttonHandle:e.buttonHandle})}):null),n.a.createElement(p.c,null,n.a.createElement("h3",{className:"aside-title"},"Filtrage personnalis\xe9"),m.length>0?m.map(function(t,s){return n.a.createElement(y,{index:s,key:s,articles:a,select:t,selectHandle:e.selectHandle,filteredOptions:e.state.filteredOptions})}):null)),n.a.createElement("ul",{className:"aside-footer-list"},n.a.createElement("li",{className:"aside-footer-list-item"},"Partager sur Facebook"),n.a.createElement("li",{className:"aside-footer-list-item"},"Partager sur Twitter"),n.a.createElement("li",{className:"aside-footer-list-item"},"Partager sur Linkedin"),n.a.createElement("li",{className:"aside-footer-list-item"},"letemps.ch")),n.a.createElement("img",{className:"aside-footer-bg",alt:"",src:P.a})),n.a.createElement("main",{className:"".concat(l?"is-moved-right":"")},n.a.createElement("div",{className:"main-header ".concat(r?"is-visible":"")},n.a.createElement(V,{asideToggle:this.asideToggle}),n.a.createElement(H,{onChange:this.searchHandler,searchTerm:this.state.searchTerm}),n.a.createElement(T,{orderHandle:this.orderHandle,orderLabel:this.state.orderLabel})),n.a.createElement(g,{loading:u}),n.a.createElement("div",{className:"grid ".concat(o?"is-visible":"")},a.length>0?a.map(function(t,a){return n.a.createElement(N,{index:a,key:a,item:t,introVisible:h,introInnerVisible:f,articleOpen:e.articleOpen,introClose:e.introClose,hideLoading:e.hideLoading})}):n.a.createElement("div",{className:"no-results"},n.a.createElement("div",{className:"no-results--inner"},n.a.createElement("img",{className:"aside--close-button--img",src:A.a,alt:""}),n.a.createElement("h4",{className:"no-results--title"},"Votre recherche n'a produit aucun r\xe9sultat"),n.a.createElement("button",{className:"no-results--button",onClick:this.resetFilters},"R\xe9initialiser les filtres"))))),n.a.createElement(b,{frameVisible:c},n.a.createElement(v,{articleClose:this.articleClose,item:this.state.item})))}}]),t}(s.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(n.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[35,2,1]]]);
//# sourceMappingURL=main.9f47b0f0.chunk.js.map